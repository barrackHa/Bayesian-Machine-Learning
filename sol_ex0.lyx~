#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize default
\use_hyperref false
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Title
BML EX0
\end_layout

\begin_layout Author
Barak Haim
\end_layout

\begin_layout Section
Linear Algebra
\end_layout

\begin_layout Subsection
Q form derivation 
\end_layout

\begin_layout Paragraph
Denot 
\begin_inset Formula $Q(x)=x^{T}Rx$
\end_inset

 , Note 
\begin_inset Formula $x^{T}Rx=<x,\sum<R_{i},x>>$
\end_inset

, Denote 
\begin_inset Formula $R=\left[\begin{array}{ccc}
 & \vdots\\{}
[- & R_{i}^{T} & -]\\
 & \vdots
\end{array}\right]$
\end_inset

 where 
\begin_inset Formula $\{R_{i}\}_{i=1}^{n}\subset\mathbb{R}^{n}$
\end_inset

 are the vectors comprising R's rows , so - 
\begin_inset Formula 
\begin{align*}
x^{T}Rx & =\left\langle x,Rx\right\rangle \\
= & \left\langle x,\left[\begin{array}{c}
\vdots\\
R_{i}^{T}x\\
\vdots
\end{array}\right]\right\rangle \\
= & \left\langle x,\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum R_{ij}x_{j}}\\
\vdots
\end{array}\right]\right\rangle \\
= & [x_{1},\ldots,x_{n}]\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum R_{ij}x_{j}}\\
\vdots
\end{array}\right]\\
= & \stackrel[i=1]{n}{\sum x_{i}}\stackrel[j=1]{n}{\sum}R_{ij}x_{j}=\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}
\end{align*}

\end_inset


\end_layout

\begin_layout Paragraph
For index 
\begin_inset Formula $1\le k\le n$
\end_inset

 the partial derivative is (
\begin_inset Formula $x_{k}$
\end_inset

 marks the k-th entry in the vector 
\begin_inset Formula $x$
\end_inset

): 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
 & \frac{\partial}{\partial x_{k}}x^{T}Rx\\
= & \frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}\\
= & \stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\frac{\partial}{\partial x_{k}}x_{i}R_{ij}x_{j}\\
\underset{1}{=} & \underset{j\ne k}{\sum}\frac{\partial}{\partial x_{k}}x_{k}R_{kj}x_{j}+\underset{i\ne k}{\sum}\frac{\partial}{\partial x_{k}}x_{i}R_{ik}x_{k}+\frac{\partial}{\partial x_{k}}x_{k}R_{kk}x_{k}\\
= & \underset{j\ne k}{\sum}R_{kj}x_{j}+\underset{i\ne k}{\sum}x_{i}R_{ik}+2x_{k}R_{kk}\\
= & \underset{j}{\sum}R_{kj}x_{j}+\underset{i}{\sum}x_{i}R_{ik}
\end{align*}

\end_inset


\end_layout

\begin_layout Paragraph
Where 1 is due to the fact that when 
\begin_inset Formula $i,j\ne k$
\end_inset

 we get - 
\begin_inset Formula $\frac{\partial}{\partial x_{k}}x_{i}R_{ij}x_{j}=0$
\end_inset

.
 Thus, the vector of partials is: 
\end_layout

\begin_layout Standard
\begin_inset Formula 
\[
\nabla x^{T}Rx=\left[\begin{array}{c}
\underset{j}{\sum}R_{1j}x_{j}+\underset{i}{\sum}x_{i}R_{i1}\\
\vdots\\
\underset{j}{\sum}R_{nj}x_{j}+\underset{i}{\sum}x_{i}R_{in}
\end{array}\right]=\left[\begin{array}{c}
\underset{j}{\sum}R_{1j}x_{j}\\
\vdots\\
\underset{j}{\sum}R_{nj}x_{j}
\end{array}\right]+\left[\begin{array}{c}
\underset{i}{\sum}x_{i}R_{i1}\\
\vdots\\
\underset{i}{\sum}x_{i}R_{in}
\end{array}\right]=Rx+(x^{T}R)^{T}=x^{T}(A^{T}+A)
\]

\end_inset

Denote 
\begin_inset Formula $g(x)=x-\mu$
\end_inset

 and so we get 
\begin_inset Formula $f_{1}(x)=Q(g(x))$
\end_inset

.
 From the chain rule we get 
\begin_inset Formula $\frac{\partial f_{1}}{\partial x}=\frac{\partial g(x)}{\partial x}\cdot\frac{\partial Q(g(x))}{\partial g(x)}$
\end_inset

.
 We found 
\begin_inset Formula $\frac{\partial Q(g(x))}{\partial g(x)}=x^{T}(A^{T}+A)$
\end_inset

, also 
\begin_inset Formula $\frac{\partial g(x)}{\partial x}=\frac{\partial x}{\partial x}-\frac{\partial\mu}{\partial x}=1-0=1$
\end_inset

.
 Finally:
\begin_inset Formula 
\[
\frac{\partial f_{1}}{\partial x}(x)=x^{T}(A^{T}+A)
\]

\end_inset


\end_layout

\begin_layout Paragraph
Now we look at the case for 
\begin_inset Formula $(x-\mu)$
\end_inset

:
\end_layout

\begin_layout Paragraph
\begin_inset Formula 
\begin{align*}
 & (x-\mu)^{T}R(x-\mu)\\
= & <(x-\mu),R(x-\mu)>\\
= & <(x-\mu),\left[\begin{array}{c}
\vdots\\
R_{i}^{T}(x-\mu)\\
\vdots
\end{array}\right]>\\
= & <(x-\mu),\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}\\
\vdots
\end{array}\right]>\\
= & [x_{1}-\mu_{1},\ldots,x_{n}-\mu_{n}]\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}\\
\vdots
\end{array}\right]\\
= & [x_{1},\ldots,x_{n}]\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}\\
\vdots
\end{array}\right]-[\mu_{1},\ldots,\mu_{n}]\left[\begin{array}{c}
\vdots\\
\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}\\
\vdots
\end{array}\right]\\
= & \stackrel[i=1]{n}{\sum}x_{i}\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}-\stackrel[i=1]{n}{\sum}\mu_{i}\stackrel[j=1]{n}{\sum}R_{ij}(x-\mu)_{j}\\
= & \left(\stackrel[i=1]{n}{\sum}x_{i}\left[\stackrel[j=1]{n}{\sum}R_{ij}x_{j}-\stackrel[j=1]{n}{\sum}R_{ij}\mu_{j}\right]\right)-\left(\stackrel[i=1]{n}{\sum}\mu_{i}\left[\stackrel[j=1]{n}{\sum}R_{ij}x_{j}-\stackrel[j=1]{n}{\sum}R_{ij}\mu_{j}\right]\right)\\
= & \left(\stackrel[i=1]{n}{\sum}\left[\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}\right]\right)-\left(\stackrel[i=1]{n}{\sum}\left[\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}x_{j}-\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}\mu_{j}\right]\right)\\
= & \left(\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}\right)-\left(\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}x_{j}-\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}\mu_{j}\right)\\
= & \stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-2\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}-\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}\mu_{j}\\
\end{align*}

\end_inset

Since derivation is a linear operation:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
 & \frac{\partial}{\partial x_{k}}(x-\mu)^{T}R(x-\mu)\\
= & \frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-\frac{\partial}{\partial x_{k}}2\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}-\frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\mu_{i}R_{ij}\mu_{j}\\
= & \frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-\frac{\partial}{\partial x_{k}}2\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}\\
= & \frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}x_{j}-2\frac{\partial}{\partial x_{k}}\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}x_{i}R_{ij}\mu_{j}\\
= & \underset{j}{\sum}R_{kj}x_{j}+\underset{i}{\sum}x_{i}R_{ik}-2\stackrel[i=1]{n}{\sum}\stackrel[j=1]{n}{\sum}\frac{\partial}{\partial x_{k}}x_{i}R_{ij}\mu_{j}\\
= & \underset{j}{\sum}R_{kj}x_{j}+\underset{i}{\sum}x_{i}R_{ik}-2\stackrel[j=1]{n}{\sum}\frac{\partial}{\partial x_{k}}x_{k}R_{kj}\mu_{j}\\
= & \underset{j}{\sum}R_{kj}x_{j}+\underset{i}{\sum}x_{i}R_{ik}-2\stackrel[j=1]{n}{\sum}R_{kj}\mu_{j}
\end{align*}

\end_inset


\end_layout

\begin_layout Paragraph
In vector form:
\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
 & \nabla(x-\mu)^{T}R(x-\mu)\\
= & \left[\begin{array}{c}
\underset{j}{\sum}R_{1j}x_{j}+\underset{i}{\sum}x_{i}R_{i1}-2\stackrel[j=1]{n}{\sum}R_{1j}\mu_{j}\\
\vdots\\
\underset{j}{\sum}R_{nj}x_{j}+\underset{i}{\sum}x_{i}R_{in}-2\stackrel[j=1]{n}{\sum}R_{nj}\mu_{j}
\end{array}\right]\\
= & \left[\begin{array}{c}
\underset{j}{\sum}R_{1j}x_{j}\\
\vdots\\
\underset{j}{\sum}R_{nj}x_{j}
\end{array}\right]+\left[\begin{array}{c}
\underset{i}{\sum}x_{i}R_{i1}\\
\vdots\\
\underset{i}{\sum}x_{i}R_{in}
\end{array}\right]-2\left[\begin{array}{c}
\underset{j}{\sum}R_{1j}\mu_{j}\\
\vdots\\
\underset{j}{\sum}R_{nj}\mu_{j}
\end{array}\right]\\
= & Rx+(x^{T}R)^{T}-2R\mu
\end{align*}

\end_inset


\end_layout

\begin_layout Subsubsection
new approch
\end_layout

\begin_layout Paragraph
Denote 
\begin_inset Formula $g_{1}(x)=x-\mu$
\end_inset

, 
\begin_inset Formula $g_{2}(x)=Rx$
\end_inset

 , 
\begin_inset Formula $g_{3}(x)=x$
\end_inset

 and 
\begin_inset Formula $g_{4}(x)=g_{3}(x)g_{2}(x)$
\end_inset

.
 So 
\begin_inset Formula $f_{1}(x)=g_{4}(g_{1}(x))$
\end_inset

.
 By the chain role: 
\begin_inset Formula 
\[
\frac{\partial f_{1}}{\partial x}(x)=\frac{\partial(g_{4}\circ g_{1})}{\partial x}(x)=\frac{\partial g_{1}(x)}{\partial x}\frac{\partial g_{4}(g_{1}(x))}{\partial g_{1}}=\bigstar
\]

\end_inset

Now - 
\begin_inset Formula $\frac{\partial g_{1}(x)}{\partial x}=1$
\end_inset

 and we get 
\begin_inset Formula $\bigstar=\frac{\partial g_{4}(g_{1}(x))}{\partial g_{1}}=\frac{\partial g_{4}(x)}{\partial x}$
\end_inset

.
 By the product role we get: 
\begin_inset Formula 
\[
\frac{\partial g_{4}(x)}{\partial x}=\frac{\partial(g_{3}\cdot g_{2})(x)}{\partial x}=\frac{\partial g_{3}(x)}{\partial x}g_{2}(x)+\frac{\partial g_{2}(x)}{\partial x}g_{3}(x)
\]

\end_inset

separately we have - 
\begin_inset Formula $\frac{\partial g_{3}(x)}{\partial x}=1$
\end_inset

 (same as 
\begin_inset Formula $g_{1}$
\end_inset

 only without the constant) and we're left with - 
\begin_inset Formula $\frac{\partial g_{2}(x)}{\partial x}$
\end_inset

.
 Since 
\begin_inset Formula $Rx=\left[\begin{array}{c}
\vdots\\
R_{i}^{T}x\\
\vdots
\end{array}\right]$
\end_inset

 where 
\begin_inset Formula $R_{i}^{T}$
\end_inset

 is the i'th row vector of R (in the recitation - eq 3.3 they're marked as
 
\begin_inset Formula $a_{i}'s$
\end_inset

).
 For each 
\begin_inset Formula $1\le i\le n$
\end_inset

 we get 
\begin_inset Formula $R_{i}^{T}x=\stackrel[j=1]{n}{\sum}R_{ij}x_{j}$
\end_inset

.
 The partial derivitve for 
\begin_inset Formula $1\le k\le n$
\end_inset

 is:
\begin_inset Formula 
\[
\frac{\partial}{\partial x_{k}}\stackrel[j=1]{n}{\sum}R_{ij}x_{j}=R_{ik}
\]

\end_inset

So long story short 
\begin_inset Formula $\frac{\partial g_{2}(x)}{\partial x}=R$
\end_inset

.
 All Togther now:
\begin_inset Formula 
\begin{align*}
 & \frac{\partial g_{3}(x)}{\partial x}g_{2}(x)+\frac{\partial g_{2}(x)}{\partial x}g_{3}(x)\\
= & 1Rx+(Rx)^{T}
\end{align*}

\end_inset


\end_layout

\begin_layout Subsection
\begin_inset Formula $f_{2}(\theta)=\stackrel[i=1]{n}{\sum}(h_{i}^{T}\theta-y_{i})^{2}\overset{?}{=}\left\Vert H\theta-y\right\Vert ^{2}$
\end_inset


\end_layout

\begin_layout Standard
\begin_inset Formula 
\begin{align*}
 & \frac{\partial f_{3}}{\partial\theta}\\
= & -\frac{\lambda}{2}\sum\frac{\partial(h_{i}^{T}θ−y_{i})^{2}}{\partial\theta}\\
= & -\frac{\lambda}{2}\sum2(h_{i}^{T}θ−y_{i})
\end{align*}

\end_inset


\end_layout

\begin_layout Section
Probability
\end_layout

\end_body
\end_document
